{"source":"webpackJsonp([2],{575:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=n(15),O=d(o),l=n(76),i=n(34),u=s(n(236)),c=s(n(237)),C=d(n(589)),m=d(n(580)),y=d(n(590));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}var f=(function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,o.Component),a(p,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.actions,n=e.params,a=this.props.location.query.page,r=n._id;t.ajaxData({url:\"/api/blog/articleList\",method:\"post\",data:{_id:r,page:a||1}})}},{key:\"componentWillUnmount\",value:function(){(0,this.props.actions.details)({name:\"\",category:\"\",content:\"\",cover:\"\",pv:0,title:\"\",time:{minute:\"\"},comments:[]})}},{key:\"renderReplys\",value:function(e,c,s,t,d){var f=this,p=this.props.actions.showTextareaAction,m=this.props.info.name,y=[];return e.forEach(function(e,t,n){var a=e.avatar,r=e.answerBy,o=e.answerTo,l=e.message,i=e.time,u=e._id;y.push(O.default.createElement(\"li\",{key:t,className:C.default.item},O.default.createElement(\"img\",{src:a.avatar||\"\"}),O.default.createElement(\"div\",null,O.default.createElement(\"p\",null,O.default.createElement(\"span\",{className:C.default.answerBy},r),r==c&&\"\"==o?null:O.default.createElement(\"span\",{className:C.default.answerTo},\" 回复 \",o),O.default.createElement(\"span\",{className:C.default.message},\": \",l)),O.default.createElement(\"div\",null,r==m&&O.default.createElement(\"span\",{className:C.default.del,onClick:function(){f.props.actions.deleteComment({key:s,key1:t,commentId:d,subcommentId:u,type:\"subcomment\",query:f.props.query,pageList:f.props.pageList})}},\"删除\"),i,O.default.createElement(\"span\",{onClick:function(){p(s),f.refs[s].placeholder=\"回复 \"+r+\":\",f.setState({answerTo:r})}},\"回复\")))))}),y}},{key:\"renderComments\",value:function(e,p,m){var y=this,t=this.props.actions,h=t.replyArticle,v=t.extendAction,g=t.showTextareaAction,E=t.deleteComment,n=this.props,w=n.query,b=n.pageList,k=b.limitNum,_=b.count,x=(b.pageNum,w.page),N=[];return e.forEach(function(e,t,n){var a=e.reply,r=e.replyByOther,o=e.extend,l=e.showTextarea,i=e._id,u=a.name,c=a.avatar,s=a.message,d=a.time,f=y.props.info._id;N.push(O.default.createElement(\"li\",{key:t,className:C.default.commentBox},O.default.createElement(\"div\",{className:C.default.userInfo},O.default.createElement(\"img\",{src:c.avatar}),O.default.createElement(\"div\",{className:C.default.name},u)),O.default.createElement(\"div\",{className:C.default.replyBox},O.default.createElement(\"p\",null,s),O.default.createElement(\"div\",{className:C.default.timeInfo},m==u&&O.default.createElement(\"span\",{className:C.default.delete,onClick:function(){E({articleId:p,commentId:i,type:\"comment\",query:w,pageList:b,key:_-t+(1-x)*k})}},\"删除\"),O.default.createElement(\"span\",{className:C.default.floor},_-t+(1-x)*k,\"楼\"),O.default.createElement(\"span\",null,d),O.default.createElement(\"span\",{className:o?\"\":C.default.hid,onClick:function(){v(t)}},o?\"收起回复\":0==r.length?\"回复\":\"回复(\"+r.length+\")\")),O.default.createElement(\"ul\",{className:C.default.replyDetails+\" \"+(o?\"\":C.default.hid)},0<r.length&&y.renderReplys(r,u,t,l,i),0<r.length&&O.default.createElement(\"div\",{className:C.default.showTextarea+\" \"+(o?\"\":C.default.hid),onClick:function(){g(t),y.setState({answerTo:\"\"},function(){y.refs[t].placeholder=\"\"})}},\"我也说一句\"),O.default.createElement(\"textarea\",{ref:\"\"+t,className:l?\"\":C.default.hid}),O.default.createElement(\"div\",{className:C.default.publish+\" \"+(l?\"\":C.default.hid),onClick:function(){h({message:y.refs[\"\"+t].value,_id:i,answerBy:m,type:\"floor\",index:t,answerTo:y.state.answerTo,userId:f},function(){y.refs[t].value=\"\"})}},\"发表\")))))}),N}},{key:\"render\",value:function(){var e=this,t=this.props.details,n=t.name,a=t.title,r=t.content,o=t.pv,l=t.time,i=t.cover,u=t._id,c=t.comments,s=this.props.actions.replyArticle,d=this.props.pageList,f=this.props.info.name,p=this.props.info._id;return O.default.createElement(m.default,{title:\"详情页\"},O.default.createElement(\"div\",{className:\"content \"+C.default.container},O.default.createElement(\"h1\",null,a),O.default.createElement(\"div\",{className:C.default.info},O.default.createElement(\"span\",null,\"作者：\"),O.default.createElement(\"span\",null,n),O.default.createElement(\"span\",null,\"    阅读量：\"),O.default.createElement(\"span\",null,o),O.default.createElement(\"span\",null,\"    发布时间：\"),O.default.createElement(\"span\",null,l.minute)),O.default.createElement(\"div\",{className:C.default.main},\"\"!=i&&O.default.createElement(\"div\",{className:C.default.coverImg},O.default.createElement(\"img\",{src:i})),O.default.createElement(\"p\",null,r)),O.default.createElement(\"div\",{className:C.default.messageBox},O.default.createElement(\"h2\",null,\"留言区\"),0==c.length?O.default.createElement(\"span\",null,\"暂无留言\"):O.default.createElement(\"ul\",null,this.renderComments(c,u,f)),1<d.pageNum&&O.default.createElement(y.default,{location:this.props.location}),O.default.createElement(\"h2\",null,\"发布评论\"),O.default.createElement(\"div\",{className:C.default.formItem},O.default.createElement(\"label\",null,\"留言：\"),O.default.createElement(\"div\",{className:C.default.inputDiv},O.default.createElement(\"textarea\",{ref:\"textarea\",rows:\"5\",cols:\"30\",placeholder:\"说点什么呢\"}))),O.default.createElement(\"div\",{className:C.default.btn,onClick:function(){s({message:e.refs.textarea.value,_id:u,answerBy:f,type:\"article\",userId:p},function(){e.refs.textarea.value=\"\"})}},\"提交\"))))}}]),p);function p(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,p);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return e.state={answerTo:\"\"},e}t.default=(0,l.connect)(function(e){return{details:e.home.details,info:e.common.userInfo.info,type:\"index\",query:e.comments.query,pageList:e.comments.pageList}},function(e){return{actions:(0,i.bindActionCreators)(Object.assign({},c,{ajaxData:u.ajaxData,details:u.details}),e)}})(f)},580:function(e,t,n){\"use strict\";var a=n(15),r=n(22),o=n(581);function l(){}l.prototype=Object.create(a.Component.prototype),l.displayName=\"DocumentTitle\",l.propTypes={title:r.string.isRequired},l.prototype.render=function(){return this.props.children?a.Children.only(this.props.children):null},e.exports=o(function(e){var t=e[e.length-1];if(t)return t.title},function(e){var t=e||\"\";t!==document.title&&(document.title=t)})(l)},581:function(e,t,n){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e.default:e}var u=n(15),c=a(u),s=a(n(582));function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=!(\"undefined\"==typeof window||!window.document||!window.document.createElement);e.exports=function(t,n,i){if(\"function\"!=typeof t)throw new Error(\"Expected reducePropsToState to be a function.\");if(\"function\"!=typeof n)throw new Error(\"Expected handleStateChangeOnClient to be a function.\");if(void 0!==i&&\"function\"!=typeof i)throw new Error(\"Expected mapStateOnServer to either be undefined or a function.\");return function(a){if(\"function\"!=typeof a)throw new Error(\"Expected WrappedComponent to be a React component.\");var r,o=[];function l(){r=t(o.map(function(e){return e.props})),e.canUseDOM?n(r):i&&(r=i(r))}var e=function(e){function t(){return e.apply(this,arguments)||this}!function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}(t,e),t.peek=function(){return r},t.rewind=function(){if(t.canUseDOM)throw new Error(\"You may only call rewind() on the server. Call peek() to read the current state.\");var e=r;return r=void 0,o=[],e};var n=t.prototype;return n.shouldComponentUpdate=function(e){return!s(e,this.props)},n.componentWillMount=function(){o.push(this),l()},n.componentDidUpdate=function(){l()},n.componentWillUnmount=function(){var e=o.indexOf(this);o.splice(e,1),l()},n.render=function(){return c.createElement(a,this.props)},t}(u.Component);return d(e,\"displayName\",\"SideEffect(\"+function(e){return e.displayName||e.name||\"Component\"}(a)+\")\"),d(e,\"canUseDOM\",f),e}}},582:function(e,t){e.exports=function(e,t,n,a){var r=n?n.call(a,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if(\"object\"!=typeof e||!e||\"object\"!=typeof t||!t)return!1;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var c=o[u];if(!i(c))return!1;var s=e[c],d=t[c];if(!1===(r=n?n.call(a,s,d,c):void 0)||void 0===r&&s!==d)return!1}return!0}},583:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o,l=n(15),k=(o=l)&&o.__esModule?o:{default:o},_=n(86);n(584);var i=(function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,l.Component),a(u,[{key:\"componentDidMount\",value:function(){var e=this.props.location.query,t=e.page,n=(e.category,this.props);n._id,n.pageList,n.actions,this.setState({page:t||1})}},{key:\"renderBtns\",value:function(e,t){var n=this.props,a=n.query,r=n.pageList,o=n.type,l=n.actions,i=n.location,u=n._id,c=n.isMine,s=n.userId,d=l.clickPreview,f=(r.count,r.limitNum,a.page),p=a.category,m=a.keyword,y=i.pathname,h=[];if(e<8)for(var v=function(e){h.push(k.default.createElement(\"li\",{key:e},k.default.createElement(_.IndexLink,{activeClassName:\"active\",to:{pathname:y,query:{page:e,category:p,keyword:m}},onClick:function(){d({currentpage:e,type:o,category:p,keyword:m,_id:u,userId:c?s:void 0},t)}},e)))},g=1;g<e+1;g++)v(g);else{var E=1,w=7;3<f&&f<e-3?(E=f-3,w=f+3):e-3<=f&&f<e+1&&(E=e-6,w=e);var b=function(e){h.push(k.default.createElement(\"li\",{key:e},k.default.createElement(_.IndexLink,{activeClassName:\"active\",to:{pathname:\"/\",query:{page:e,category:p,keyword:m}},onClick:function(){d({currentpage:e,type:o,category:p,keyword:m,_id:u,userId:c?s:void 0},t)}},e)))};for(g=E;g<w+1;g++)b(g)}return h}},{key:\"render\",value:function(){var t=this,e=this.props,n=e.query,a=e.pageList,r=e.type,o=e.actions,l=e.location,i=e._id,u=e.userId,c=e.isMine,s=l.pathname,d=o.clickPreview,f=(a.count,a.limitNum,a.pageNum),p=n.page,m=n.category,y=n.keyword,h={query:n,pageList:a};return k.default.createElement(\"ul\",{\"data-cls\":\"pages\"},7<f&&k.default.createElement(\"li\",{onClick:function(){o.clickPreview({currentpage:1,category:m,type:r,keyword:y,_id:i,userId:c?u:void 0},h)}},k.default.createElement(_.Link,{\"data-cls\":\"pageBtn\",to:{pathname:s,query:{path:1,category:m,keyword:y}}},\"首页\")),k.default.createElement(\"li\",{onClick:function(){d({currentpage:Number(p)-1,serchPage:\"btn\",category:m,type:r,keyword:y,_id:i,userId:c?u:void 0},h)}},k.default.createElement(_.Link,{\"data-cls\":\"pageBtn\",to:{pathname:s,query:{page:1==p?1:Number(p)-1,category:m,keyword:y}}},\"上一页\")),p<=f&&this.renderBtns(f,h),k.default.createElement(\"li\",{onClick:function(){d({currentpage:Number(p)+1,serchPage:\"btn\",category:m,type:r,keyword:y,_id:i,userId:c?u:void 0},h)}},k.default.createElement(_.Link,{\"data-cls\":\"pageBtn\",to:{pathname:s,query:{page:p==f?f:Number(p)+1,category:m,keyword:y}}},\"下一页\")),7<f&&k.default.createElement(\"li\",{onClick:function(){d({currentpage:f,type:r,category:m,keyword:y,_id:i,userId:c?u:void 0},h)}},k.default.createElement(_.Link,{\"data-cls\":\"pageBtn\",to:{pathname:s,query:{page:f,category:m,keyword:y}}},\"尾页\")),k.default.createElement(\"li\",{\"data-cls\":\"inputWrap\"},k.default.createElement(\"input\",{type:\"text\",ref:\"input\",onChange:function(e){t.setState({page:e.target.value})}})),k.default.createElement(\"li\",{onClick:function(){d({currentpage:t.state.page,serchPage:!0,type:r,category:m,keyword:y,_id:i,userId:c?u:void 0},h),t.refs.input.value=\"\"}},k.default.createElement(_.Link,{\"data-cls\":\"pageBtn\",to:{pathname:s,query:{page:this.state.page>f?p:this.state.page,category:m,keyword:y}}},\"跳转\")))}}]),u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return t.state={page:1},t}t.default=i},584:function(e,t){},589:function(e,t){e.exports={container:\"detail-container-3xOnG\",info:\"detail-info-2rTcZ\",main:\"detail-main-1LoWO\",coverImg:\"detail-coverImg-1quMx\",messageBox:\"detail-messageBox-IkNs2\",commentBox:\"detail-commentBox-2kj8z\",userInfo:\"detail-userInfo-mSsic\",name:\"detail-name-pBC9j\",replyBox:\"detail-replyBox-1Q34G\",timeInfo:\"detail-timeInfo-2p1rI\",delete:\"detail-delete-12Wrz\",floor:\"detail-floor-14ekL\",hid:\"detail-hid-1_HMm\",replyDetails:\"detail-replyDetails-2UZ_q\",item:\"detail-item-Y8lET\",answerBy:\"detail-answerBy-PgkAh\",del:\"detail-del-1zdZ-\",showTextarea:\"detail-showTextarea-1KM90\",publish:\"detail-publish-1ZtX7\",formItem:\"detail-formItem-3edka\",inputDiv:\"detail-inputDiv-1_DFN\",btn:\"detail-btn-ofovI\"}},590:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a,r=n(76),o=n(34),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(237)),i=n(583),u=(a=i)&&a.__esModule?a:{default:a};t.default=(0,r.connect)(function(e){return{query:e.comments.query,pageList:e.comments.pageList,type:\"index\",_id:e.home.details._id}},function(e){return{actions:(0,o.bindActionCreators)(l,e)}})(u.default)}});"}